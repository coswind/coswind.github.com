<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[COSWIND BLOG]]></title>
  <link href="http://coswind.github.com/atom.xml" rel="self"/>
  <link href="http://coswind.github.com/"/>
  <updated>2013-01-18T18:37:00+08:00</updated>
  <id>http://coswind.github.com/</id>
  <author>
    <name><![CDATA[Yi Xia]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Archlinux基本配置]]></title>
    <link href="http://coswind.github.com/blog/2013/01/13/archlinuxan-zhuang-awesome-3-dot-5ji-pei-zhi/"/>
    <updated>2013-01-13T16:42:00+08:00</updated>
    <id>http://coswind.github.com/blog/2013/01/13/archlinuxan-zhuang-awesome-3-dot-5ji-pei-zhi</id>
    <content type="html"><![CDATA[<h2>安装图形界面</h2>

<p>安装X</p>

<pre><code>pacman -S xorg-server xorg-xinit xorg-utils xorg-server-utils
</code></pre>

<p>安装mesa获得3D支持</p>

<pre><code>pacman -S mesa
</code></pre>

<p>安装显卡驱动</p>

<pre><code>pacman -S nvidia
</code></pre>

<p>笔记本安装触屏驱动</p>

<pre><code>pacman -S xf86-input-synaptics
</code></pre>

<h2>测试X</h2>

<p>安装默认的测试环境</p>

<pre><code>pacman -S xorg-twm xorg-xclock xterm
rm ~/.xinitrc
startx
</code></pre>

<p>删除了.xinitrc, startx会启动默认的测试环境</p>

<h2>安装awesome</h2>

<pre><code>pacman -S awesome
</code></pre>

<p>启动X的时候默认启动awesome</p>

<pre><code>cp /etc/skel/.xinitrc ~/
echo "exec awesome" &gt;&gt; ~/.xinitrc
</code></pre>

<p>如果想登录后自动启动awesome</p>

<pre><code>[[ -z $DISPLAY &amp;&amp; $XDG_VTNR -eq 1 ]] &amp;&amp; exec startx &gt;&gt; .bash_profile [or .zprofile]
</code></pre>

<h2>声音配置</h2>

<p>默认不需要多余的配置，只需要解除默认的静音状态即可</p>

<pre><code>pacman -S alsa-utils
alsamixer
</code></pre>

<p>按照提示，解除master的静音状态</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Archlinux-2012.12 安装]]></title>
    <link href="http://coswind.github.com/blog/2013/01/12/archlinux-2012-dot-12-an-zhuang/"/>
    <updated>2013-01-12T21:25:00+08:00</updated>
    <id>http://coswind.github.com/blog/2013/01/12/archlinux-2012-dot-12-an-zhuang</id>
    <content type="html"><![CDATA[<h2>检查网络</h2>

<p>默认情况dhcp服务是enabled，如果使用的是有线，并且调制解调器和路由器工作良好，网络是正常可用的。</p>

<h4>有线-无路由器</h4>

<pre><code>pppoe-setup
pppoe-start
</code></pre>

<p>设置正确并启动成功，网络仍然无法连通:</p>

<pre><code>systemctl disable dhcpcd.service
pppoe-stop
pppoe-start
</code></pre>

<p>还无法连通，试着先ping<code>8.8.8.8</code>，如果能ping通，将<code>8.8.8.8</code>加入nameserver</p>

<h4>WIFI</h4>

<pre><code>wifi-menu
</code></pre>

<p>情况和上面类似</p>

<h2>分区</h2>

<p>一般来说，分三个区，swap分区为82</p>

<pre><code>cfdisk: /, /home, swap

mkfs.ext4 {/, /home}
mkswap swap
swapon swap
swapon -s

mount {/, /home} {/mnt, /mnt/home}
</code></pre>

<h2>安装基本系统</h2>

<pre><code>/etc/pacman.d/mirrorlist 163

pacstrap /mnt base{,-devel} 
pacstrap /mnt grub-bios
</code></pre>

<p>注意在安装完基本的软件包后，针对pppoe和wifi的上网方式，需要分别安装对应的软件包</p>

<pre><code>wifi  --&gt; MUST INSTALL dialog.
pppoe --&gt; MUST INSTALL rp-pppoe

多系统 --&gt; MUST INSTALL os-prober
</code></pre>

<h2>生成fstab</h2>

<pre><code>genfstab -p /mnt &gt;&gt; /mnt/etc/fstab
</code></pre>

<h2>配置新系统</h2>

<pre><code>arch-chroot /mnt
</code></pre>

<h4>Locale</h4>

<pre><code>/etc/locale.gen

locale-gen

/etc/locale.conf
</code></pre>

<h4>Time</h4>

<pre><code>timedatectl

硬件时钟不正确 --&gt; ntpdate "asia.pool.ntp.org" &amp;&amp; hwclock -w
</code></pre>

<h4>设置主机名</h4>

<pre><code>hostnamectl
</code></pre>

<h4>网络设置</h4>

<pre><code>pacman -S wpa_actiond
wireless --&gt; systemctl enable net-auto-wireless.service
</code></pre>

<h4>创建初始ramdisk</h4>

<pre><code>mkinitcpio -p linux
</code></pre>

<h4>设置root密码</h4>

<pre><code>passwd
</code></pre>

<h4>添加新用户</h4>

<pre><code>useradd -m coswind 
passwd coswind
usermod -a -G video,audio,storage,optical,users,lp,wheel,log,scanner,games,power coswind
</code></pre>

<h2>安装grub</h2>

<pre><code>grub-install /dev/sda
防止启动时的warning: cp /usr/share/locale/en\@quot/LC_MESSAGES/grub.mo /boot/grub/locale/en.mo

grub-mkconfig -o /boot/grub/grub.cfg
</code></pre>

<h2>Reboot</h2>

<pre><code>exit 
umount -a
reboot
</code></pre>
]]></content>
  </entry>
  
</feed>
