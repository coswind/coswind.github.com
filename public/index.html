
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>COSWIND'S BLOG</title>
	<meta name="author" content="Yi Xia">

	
	<meta name="description" content="默认的配置，无论是英文还是中文，显示效果都不太满意。网上例子大都解释不清楚，不敢随意尝试，怕越改越乱。 系统配置 [/etc/fonts/*] 首先要了解的是系统将字体分为那几大类？ 主要分为三大类，衬型，非衬型和等宽，具体介绍和效果可以见这里 首先要了解的是系统是怎样选择字体的？ &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="COSWIND'S BLOG" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.ico" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="/javascripts/jquery-1.7.2.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">COSWIND'S BLOG</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">BLOG</a></li>
	<li><a href="/blog/archives">ARCHIVES</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">BLOG</a></li>
	<li><a href="/blog/archives">ARCHIVES</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:coswind.herokuapp.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:coswind.herokuapp.com">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/01/19/archlinux-font-pei-zhi/">
		
			Archlinux-Font 配置</a>
	</h2>
	<div class="entry-content">
		<p>默认的配置，无论是英文还是中文，显示效果都不太满意。网上例子大都解释不清楚，不敢随意尝试，怕越改越乱。</p>

<h2>系统配置 [/etc/fonts/*]</h2>

<p>首先要了解的是系统将字体分为那几大类？</p>

<blockquote><p>主要分为三大类，<code>衬型</code>，<code>非衬型</code>和<code>等宽</code>，具体介绍和效果可以见<a href="http://wenq.org/cloud/fcdesigner_local.html">这里</a></p></blockquote>

<p>首先要了解的是系统是怎样选择字体的？</p>

<blockquote><p>系统的配置文件位于<code>/etc/fonts/conf.d</code>下, 通过阅读<code>README</code>, 了解这些配置前面数字的意义以及系统读取这些配置文件的<code>顺序</code>。</p></blockquote>

<p>这些配置文件其实我们只需要了解两个: <code>49-sansserif.conf</code> &amp; <code>65-nonlatin.conf</code>。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;match target="pattern"&gt;
</span><span class='line'>    &lt;test qual="all" name="family" compare="not_eq"&gt;
</span><span class='line'>        &lt;string&gt;sans-serif&lt;/string&gt;
</span><span class='line'>    &lt;/test&gt;
</span><span class='line'>    &lt;test qual="all" name="family" compare="not_eq"&gt;
</span><span class='line'>        &lt;string&gt;serif&lt;/string&gt;
</span><span class='line'>    &lt;/test&gt;
</span><span class='line'>    &lt;test qual="all" name="family" compare="not_eq"&gt;
</span><span class='line'>        &lt;string&gt;monospace&lt;/string&gt;
</span><span class='line'>    &lt;/test&gt;
</span><span class='line'>    &lt;edit name="family" mode="append_last"&gt;
</span><span class='line'>        &lt;string&gt;sans-serif&lt;/string&gt;
</span><span class='line'>    &lt;/edit&gt;
</span><span class='line'>&lt;/match&gt;</span></code></pre></td></tr></table></div></figure>


<p>上面的配置简单明了，将所有的字体归为了三大类，而不属于这三大类的字体，默认归为<code>sans-serif</code>。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;alias&gt;
</span><span class='line'>    &lt;family&gt;serif&lt;/family&gt;
</span><span class='line'>    &lt;prefer&gt;
</span><span class='line'>        &lt;family&gt;Artsounk&lt;/family&gt; &lt;!-- armenian --&gt;
</span><span class='line'>        ...
</span><span class='line'>        &lt;family&gt;SimSun&lt;/family&gt; &lt;!-- han (zh-cn,zh-tw) --&gt;
</span><span class='line'>        &lt;family&gt;PMingLiu&lt;/family&gt; &lt;!-- han (zh-tw) --&gt;
</span><span class='line'>        &lt;family&gt;WenQuanYi Zen Hei&lt;/family&gt; &lt;!-- han (zh-cn,zh-tw) --&gt;
</span><span class='line'>        &lt;family&gt;WenQuanYi Bitmap Song&lt;/family&gt; &lt;!-- han (zh-cn,zh-tw) --&gt;
</span><span class='line'>        ...
</span><span class='line'>    &lt;/prefer&gt;
</span><span class='line'>&lt;/alias&gt;
</span><span class='line'>
</span><span class='line'>&lt;alias&gt;
</span><span class='line'>    &lt;family&gt;sans-serif&lt;/family&gt;
</span><span class='line'>    &lt;prefer&gt;
</span><span class='line'>        &lt;family&gt;Nachlieli&lt;/family&gt; &lt;!-- hebrew --&gt;
</span><span class='line'>        ...
</span><span class='line'>        &lt;family&gt;SimSun&lt;/family&gt; &lt;!-- han (zh-cn,zh-tw) --&gt;
</span><span class='line'>        &lt;family&gt;PMingLiu&lt;/family&gt; &lt;!-- han (zh-tw) --&gt;
</span><span class='line'>        &lt;family&gt;WenQuanYi Zen Hei&lt;/family&gt; &lt;!-- han (zh-cn,zh-tw) --&gt;
</span><span class='line'>        &lt;family&gt;WenQuanYi Bitmap Song&lt;/family&gt; &lt;!-- han (zh-cn,zh-tw) --&gt;
</span><span class='line'>        ...
</span><span class='line'>    &lt;/prefer&gt;
</span><span class='line'>&lt;/alias&gt;
</span><span class='line'>
</span><span class='line'>&lt;alias&gt;
</span><span class='line'>    &lt;family&gt;monospace&lt;/family&gt;
</span><span class='line'>    &lt;prefer&gt;
</span><span class='line'>        &lt;family&gt;Miriam Mono&lt;/family&gt; &lt;!-- hebrew --&gt;
</span><span class='line'>        ...
</span><span class='line'>        &lt;family&gt;NSimSun&lt;/family&gt; &lt;!-- han (zh-cn,zh-tw) --&gt;
</span><span class='line'>        &lt;family&gt;MingLiu&lt;/family&gt; &lt;!-- han (zh-tw) --&gt;
</span><span class='line'>        &lt;family&gt;AR PL ShanHeiSun Uni&lt;/family&gt; &lt;!-- han (ja,zh-cn,zh-tw) --&gt;
</span><span class='line'>        &lt;family&gt;AR PL New Sung Mono&lt;/family&gt; &lt;!-- han (zh-cn,zh-tw) --&gt;
</span><span class='line'>        &lt;family&gt;HanyiSong&lt;/family&gt; &lt;!-- han (zh-cn) --&gt;
</span><span class='line'>        ...
</span><span class='line'>    &lt;/prefer&gt;
</span><span class='line'>&lt;/alias&gt;</span></code></pre></td></tr></table></div></figure>


<p>上面的配置文件则是各类字体在分别的类别中优先级，越靠前的字体，优先级越高。</p>

<p>从上面两个配置文件我们可以基本上了解为什么Linux系统装完<code>wenquanyi zen hei</code>字体后，系统的中文就&#8221;默认&#8221;成了该字体，然而该字体在linux下，稍显模糊。</p>

<p>相比较下，我更喜欢<code>wenquanyi zen hei sharp</code>, 十分适合终端显示，而<code>wenquanyi micro hei</code>则十分适合浏览器显示。</p>

<p>无图无真相，下面是系统的字体配置效果。
<img src="/images/urxvt-zh-screenshot.png" alt="urxvt-zh-screenshot.png" />
<img src="/images/chromium-zh-screenshot.png" alt="chromium-zh-screenshot.png" /></p>

<h2>用户配置 [~/.config/fontconfig/fonts.conf]</h2>

<p>SO?如何达成上面截图中所示的中文现实效果，直接贴配置:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;match&gt;
</span><span class='line'>    &lt;test name="family"&gt;&lt;string&gt;Terminus&lt;/string&gt;&lt;/test&gt;
</span><span class='line'>    &lt;edit name="family" mode="append" binding="strong"&gt;
</span><span class='line'>        &lt;string&gt;WenQuanYi Zen Hei Sharp&lt;/string&gt;
</span><span class='line'>    &lt;/edit&gt;
</span><span class='line'>&lt;/match&gt;
</span><span class='line'>&lt;match&gt;
</span><span class='line'>    &lt;test name="family"&gt;&lt;string&gt;serif&lt;/string&gt;&lt;/test&gt;
</span><span class='line'>    &lt;edit name="family" mode="append" binding="strong"&gt;
</span><span class='line'>        &lt;string&gt;WenQuanYi Zen Hei Sharp&lt;/string&gt;
</span><span class='line'>    &lt;/edit&gt;
</span><span class='line'>&lt;/match&gt;
</span><span class='line'>&lt;match&gt;
</span><span class='line'>    &lt;test name="family"&gt;&lt;string&gt;sans-serif&lt;/string&gt;&lt;/test&gt;
</span><span class='line'>    &lt;edit name="family" mode="append" binding="strong"&gt;
</span><span class='line'>        &lt;string&gt;WenQuanYi Micro Hei&lt;/string&gt;
</span><span class='line'>    &lt;/edit&gt;
</span><span class='line'>&lt;/match&gt;
</span><span class='line'>&lt;match&gt;
</span><span class='line'>    &lt;test name="family"&gt;&lt;string&gt;monospace&lt;/string&gt;&lt;/test&gt;
</span><span class='line'>    &lt;edit name="family" mode="append" binding="strong"&gt;
</span><span class='line'>        &lt;string&gt;WenQuanYi Zen Hei Sharp&lt;/string&gt;
</span><span class='line'>    &lt;/edit&gt;
</span><span class='line'>&lt;/match&gt;</span></code></pre></td></tr></table></div></figure>


<p>很简单吧，就像前面介绍的，我们只要把自己喜欢的中文字体放在各类别的前面就可以了。</p>

<p>这里再稍微解释一下为什么会有第一个<code>match</code>的配置，原因也很简单，<code>Terminus</code>字体属于不常见的字体，不在系统默认的字体分类里面。</p>

<p>根据前面的介绍，不在三大分类的字体会被默认分为<code>sans-serif</code>，因而中文显示会是<code>wenquanyi micro hei</code>。但是该字体在终端下表现不太好，因此我们需要给它加上相应中文字体的设定。</p>

<blockquote><p>这里还要补充的一点是<code>mode</code>的设定，是<code>append</code>，而不是<code>prepend</code>，前者是将字体的优先级设定在匹配字体的后面，即在匹配不到的时候作为第一候选，而后者相反。
因为中文字型大都包含英文字体，所以使得不仅中文是设定字体，英文都强制的使用了中文字型里的英文字体，实在是太难看，而且所有的英文字体都是如此。</p></blockquote>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-01-19T18:48:00+08:00" pubdate data-updated="true">Jan 19<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/archlinux/'>archlinux</a>, <a class='category' href='/blog/categories/font/'>font</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/01/13/archlinuxan-zhuang-awesome-3-dot-5ji-pei-zhi/">
		
			Archlinux基本配置</a>
	</h2>
	<div class="entry-content">
		<h2>安装图形界面</h2>

<p>安装X</p>

<pre><code>pacman -S xorg-server xorg-xinit xorg-utils xorg-server-utils
</code></pre>

<p>安装mesa获得3D支持</p>

<pre><code>pacman -S mesa
</code></pre>

<p>安装显卡驱动</p>

<pre><code>pacman -S nvidia
</code></pre>

<p>笔记本安装触屏驱动</p>

<pre><code>pacman -S xf86-input-synaptics
</code></pre>

<h2>测试X</h2>

<p>安装默认的测试环境</p>

<pre><code>pacman -S xorg-twm xorg-xclock xterm
rm ~/.xinitrc
startx
</code></pre>

<p>删除了.xinitrc, startx会启动默认的测试环境</p>

<h2>安装awesome</h2>

<pre><code>pacman -S awesome
</code></pre>

<p>启动X的时候默认启动awesome</p>

<pre><code>cp /etc/skel/.xinitrc ~/
echo "exec awesome" &gt;&gt; ~/.xinitrc
</code></pre>

<p>如果想登录后自动启动awesome</p>

<pre><code>[[ -z $DISPLAY &amp;&amp; $XDG_VTNR -eq 1 ]] &amp;&amp; exec startx &gt;&gt; .bash_profile [or .zprofile]
</code></pre>

<h2>声音配置</h2>

<p>默认不需要多余的配置，只需要解除默认的静音状态即可</p>

<pre><code>pacman -S alsa-utils
alsamixer
</code></pre>

<p>按照提示，解除master的静音状态</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-01-13T16:42:00+08:00" pubdate data-updated="true">Jan 13<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/archlinux/'>archlinux</a>


</div>
	
</div></article>

<nav id="pagenavi">
    
    
        <a href="/blog/page/2/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<audio preload loop>
    <source src="/media/background-music.mp3">
</audio>
<div id="music_player">
    <div class="music_bg_color">
        <div class="music_bg_image"></div>
    </div>
</div>
<script type="text/javascript">
    (function($){
        var isPlaying = localStorage.isPlaying || true;
        var el = $('.music_bg_image');
        var audioEl = $('audio')[0];
        $('#music_player').click(function() {
            el.fadeOut();
            if (isPlaying) {
                el.css('background-position', '-207px -67px');
                el.fadeIn(function() { audioEl.pause(); });
            } else {
                el.css('background-position', '-230px -67px');
                el.fadeIn(function() { audioEl.play(); });
            }
            isPlaying = !isPlaying;
            localStorage.isPlaying = isPlaying;
        }).trigger('click');
    })(jQuery);
</script>


	<footer id="footer" class="inner">Copyright &copy; 2013

    Yi Xia

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->






</body>
</html>
